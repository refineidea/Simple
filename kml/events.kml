<krpano>
		
	<_
		run_on_startup="true"
		old_stagewidth="0"
		old_stageheight="0"
	/>	

	<events name="global_events" keep="true"
		onxmlcomplete="
			add_hotspot_thumbs();
			add_tiles();
			add_slider_marks();

			set(webvr.mobilevr_lens_fov, 120);

			copy(_.old_stagewidth, stagewidth);
			copy(_.old_stageheight, stageheight);

			if (_.auto_vr,
				delayedcall(1, webvr.enterVR());
			);

			if (_.run_on_startup,
				set(_.run_on_startup, false);

				for (set(_.i, 0), _.i LT scene.count, inc(_.i),
					if (_.i !== xml.scene,
						set(scene[get(_.i)].visited, false);
					,
						set(scene[get(_.i)].visited, true);
					);
				);

				init_catalog();
			);
		"
		onviewchanged="
			if(_.hs_thumb_container_visible,
				update_hs_thumb_pos();
			);

			if ((_.old_stagewidth != stagewidth) OR (_.old_stageheight != stageheight),

				copy(_.old_stagewidth, stagewidth);
				copy(_.old_stageheight, stageheight);
				resize_catalog();
				callwith(layer[poster], resize);
			);
		"
		onloadcomplete="
			callwith(layer[poster], hide);
		"
	/>

	<events name="vr_events" keep="true"
		
		onnewscene="
			copy(hotspot[tiles].ath, view.hlookat);
		"

		onviewchange="
			vr_menu_following();
		"
	/>

	<events name="mobile_events" keep="true"
		onclick="
			if (_.hs_thumb_visible,
				hide_hs_thumb(false);
			);
		"	
	/>

	<events name="desktop_events" devices="desktop" keep="true"
		onkeydown="
			
			if(keycode == 17,
				set(_.ctrl_flag, true);
			);
		
			if(_.ctrl_flag,
				set(vlookat_moveforce, 0);
				set(hlookat_moveforce, 0);
				
				if(keycode == 37,
					skin_nextscene(-1);
				);
				if(keycode == 39,
					skin_nextscene(1);
				);
			);
		"
		onkeyup="
			if(keycode == 17,
				set(_.ctrl_flag, false);
			);
		"
	/>

</krpano>
